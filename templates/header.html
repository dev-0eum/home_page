{% load static %}
<div style="
    background-image: url('/static/photo/back.png');
    background-size: cover;
    background-position: center;
    height: 200px;
    padding: 0 30px;
    display: flex;
    align-items: center;
    justify-content: space-between;
    position: relative;
    z-index: 1; /* 여기만 있으면 충분함 */
    isolation: isolate; /* 내부 z-index 격리 */ ">

    <!-- 흐림 오버레이 -->
    <div style="
        content: '';
        position: absolute;
        inset: 0;
        background-color: rgba(255,255,255,0.6);
        backdrop-filter: blur(3px);
        z-index: -1;
    "></div>

    <!-- 로고 -->
    <div>
        <a href="{% url 'mainpage:home' %}">
            <img src="{% static '/photo/icpalogo2.png' %}" alt="ICPA 로고" style="height: 150px; margin-left: 20px;">
        </a>
    </div>

    <!-- 우측 네비게이션 + 아이콘 감싸는 박스 -->
    <div style="display: flex; align-items: center; gap: 20px;">
        <!-- 네비게이션 -->
        <div style="padding: 8px 16px; border-radius: 20px; background-color: rgb(153, 202, 255);">
            <nav style="flex-grow: 1; margin-left: 5px; margin-right: 5px; margin-top: 3px; margin-bottom: 3px;">
                <ul style="list-style: none; display: flex; gap: 20px; justify-content: center; margin: 0; padding: 0;">
                {% if user.username == 'icpadmin'%}
                <li><a href="{% url 'mainpage:test' %}" style="text-decoration: none; color: black;">Admin</a></li>
                {% endif %}
                <li><a href="{% url 'mainpage:home' %}" style="text-decoration: none; color: black;">ICPA</a></li>
                <li><a href="{% url 'mainpage:search' %}" style="text-decoration: none; color: black;">Search</a></li>
                <li><a href="#" style="text-decoration: none; color: black;">사업소개</a></li>
                <li><a href="#" style="text-decoration: none; color: black;">동문소식</a></li>
                <li><a href="#" style="text-decoration: none; color: black;">Contact</a></li>
                </ul>
            </nav>
        </div>

        {% if not user.is_authenticated %}
        <!-- is not LogIn -->
        <div class="material-icons" style="padding: 8px 8px; border-radius: 20px; border: solid 1px;">
            <a href="{% url 'account:login' %}?next={% url 'mainpage:home' %}">
                login
            </a>
        </div>

        <div class="material-icons" style="padding: 8px 8px; border-radius: 20px; border: solid 1px;">
            <a href="{% url 'account:signup' %}">
                    group add
            </a>
        </div>

        {% else %}
        <!-- is LogIn & show who is connected
        
        <a href="{% url 'account:detail' pk=user.pk %}">
            User: {{user.username}}
        </a>
        -->

        <div class="material-icons" style="padding: 8px 8px; border-radius: 20px; border: solid 1px;">
            <form action="{% url 'account:logout' %}?next={% url 'mainpage:home' %}" method="post" style="display:inline;">
                {% csrf_token %}
                <button type="submit" style="all: unset; cursor: pointer;">logout</button>
            </form>
        </div>

        
        <div class="material-icons" style="padding: 8px 8px; border-radius: 20px; border: solid 1px;">
            <!-- if user has no profile -->
            {% if not user.profile %}
            <a href="{% url 'account:detail' pk=user.pk %}">
                person
            </a>

            {% else %}
            <!-- if user has profile -->
            <a href="{% url 'account:detail' pk=user.pk %}">
                person
            </a>
            {% endif %}
        </div>
        
        {% endif %}

    </div>
</div>
